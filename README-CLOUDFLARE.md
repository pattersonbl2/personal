# Cloudflare Pages Deployment

## Build Configuration

This site uses a custom build script to handle different base URLs for preview and production deployments.

### Build Command

In Cloudflare Pages settings, set the build command to:

```bash
./build.sh
```

Or if you prefer inline:

```bash
if [ -n "$CF_PAGES_URL" ]; then BASE_URL="$CF_PAGES_URL"; else BASE_URL="https://ark31.info"; fi; if [[ ! "$BASE_URL" =~ /$ ]]; then BASE_URL="${BASE_URL}/"; fi; hugo --baseURL "$BASE_URL" --minify
```

### Build Output Directory

Set the output directory to: `public`

### Environment Variables

No additional environment variables needed - the build script automatically uses:
- `CF_PAGES_URL` for preview deployments (set automatically by Cloudflare)
- `https://ark31.info` for production deployments

## Troubleshooting 404 Errors

If you see 404 errors on preview deployments:

1. **Check build command**: Ensure it's using `./build.sh` or the inline version above
2. **Check baseURL**: The build script should output the baseURL being used
3. **Check _redirects**: The `static/_redirects` file should be copied to `public/_redirects` after build
4. **Verify URLs**: All internal links should use relative URLs or be generated by Hugo

## Local Development

For local development, use:

```bash
hugo server
```

This will use the default baseURL from `config.yaml` (currently `/`).
